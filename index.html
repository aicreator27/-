<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡‘èç´ é¤Šç‰¹è¨“ç­ | è§€å¿µ x å¯¦æˆ°æ¨¡æ“¬</title>
    <style>
        :root {
            --primary: #0f766e;
            --secondary: #115e59;
            --accent: #f59e0b;
            --bg: #f0fdfa;
            --text: #134e4a;
            --sidebar-width: 280px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif; }
        
        body { background-color: var(--bg); color: var(--text); display: flex; min-height: 100vh; overflow-x: hidden; }

        /* --- å´é‚Šæ¬„ --- */
        .sidebar {
            width: var(--sidebar-width);
            background: white;
            padding: 20px;
            border-right: 1px solid #ccfbf1;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 10;
        }

        .brand {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .brand-sub { font-size: 0.8rem; color: #64748b; margin-bottom: 30px; padding-left: 5px; }

        .module-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.2s;
            font-weight: 600;
            color: #64748b;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid transparent;
        }

        .module-item:hover { background: #f0fdfa; color: var(--primary); }
        .module-item.active { background: var(--primary); color: white; box-shadow: 0 4px 6px -1px rgba(15, 118, 110, 0.3); }

        /* --- ä¸»å…§å®¹å€ --- */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            padding: 40px;
            max-width: 1200px;
        }

        .header-section { margin-bottom: 30px; background: white; padding: 30px; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); }
        .header-section h2 { font-size: 2rem; margin-bottom: 15px; color: var(--primary); }
        .header-section p { color: #475569; line-height: 1.8; }

        /* --- å¡ç‰‡ç¶²æ ¼ (Weeks 1-3) --- */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .flashcard {
            background: white;
            height: 200px;
            border-radius: 16px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 2px solid #f0fdfa;
            display: flex;
            flex-direction: column;
            padding: 25px;
            position: relative;
            overflow: hidden;
        }
        
        .flashcard:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); border-color: var(--primary); }
        
        .tag {
            font-size: 0.75rem;
            padding: 6px 12px;
            background: #ccfbf1;
            color: var(--primary);
            border-radius: 20px;
            width: fit-content;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .click-hint {
            margin-top: auto;
            font-size: 0.85rem;
            color: var(--primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- è©³æƒ…å½ˆçª— (Modal) --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 700px;
            max-height: 85vh;
            border-radius: 15px;
            padding: 0;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: modalIn 0.3s ease-out;
        }

        .modal-header {
            padding: 20px 30px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-body {
            padding: 30px;
            overflow-y: auto;
            line-height: 1.8;
            color: #334155;
        }

        .close-btn { background: none; border: none; font-size: 2rem; cursor: pointer; color: #94a3b8; line-height: 1; }
        .close-btn:hover { color: #ef4444; }

        /* å½ˆçª—å…§æ¨£å¼ */
        .detail-block { margin-bottom: 25px; }
        .detail-title { font-size: 1.1rem; font-weight: 700; color: #1e293b; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
        .highlight-box {
            background: #f0fdfa;
            border-left: 4px solid var(--primary);
            padding: 15px;
            margin: 15px 0;
            font-size: 0.95rem;
            color: #134e4a;
        }

        /* --- éŠæˆ²æ¨¡æ“¬å™¨ (Week 4) --- */
        .game-panel {
            background: #1e293b; /* æ·±è‰²èƒŒæ™¯å€åˆ† */
            color: #e2e8f0;
            border-radius: 20px;
            padding: 40px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.3);
        }

        .status-bar {
            display: flex;
            justify-content: space-around;
            padding-bottom: 20px;
            border-bottom: 2px solid #334155;
            margin-bottom: 30px;
        }
        
        .status-val { font-size: 1.5rem; font-weight: bold; }
        .status-val.money { color: #facc15; }
        
        .scene-content { flex: 1; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .scene-icon { font-size: 5rem; margin-bottom: 20px; }
        .scene-text { font-size: 1.3rem; margin-bottom: 40px; line-height: 1.6; }

        .choice-btn {
            width: 100%;
            max-width: 600px;
            padding: 15px 20px;
            margin: 10px auto;
            background: transparent;
            border: 2px solid #f59e0b;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            text-align: left;
            transition: 0.2s;
        }
        .choice-btn:hover { background: #f59e0b; color: #1e293b; transform: translateX(5px); }

        /* RWD */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .main-content { margin-left: 0; padding: 20px; }
        }

        @keyframes modalIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="brand">ğŸš€ è²¡å¯Œç‰¹è¨“ç­</div>
        <div class="brand-sub">å¾è§€å¿µåˆ°æ¨¡æ“¬å¯¦æˆ°</div>
        <ul id="moduleList">
            </ul>
    </nav>

    <main class="main-content">
        <div id="contentArea">
            </div>
    </main>

    <div class="modal-overlay" id="detailModal" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 style="font-size:1.5rem; color:var(--primary);" id="modalTitle">æ¨™é¡Œ</h2>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <div class="modal-body" id="modalBody">
                </div>
        </div>
    </div>

    <script>
        // --- è³‡æ–™åº«ï¼šèª²ç¨‹ + éŠæˆ²åŠ‡æœ¬ ---
        const curriculum = [
            {
                id: 1,
                type: 'study', // å­¸ç¿’æ¨¡å¼
                title: "ç¬¬ä¸€é€±ï¼šç†è²¡åŸºæœ¬åŠŸ",
                desc: "åœ¨æŠ•è³‡ä¹‹å‰ï¼Œå…ˆå­¸æœƒå®ˆä½éŒ¢ã€‚äº†è§£æœƒè¨ˆåŸºç¤èˆ‡å‚µå‹™ç®¡ç†ã€‚",
                cards: [
                    { 
                        title: "æç›Šè¡¨ (P&L)", 
                        tag: "æœƒè¨ˆåŸºç¤", 
                        details: [
                            { sub: "å®šç¾©", txt: "æç›Š = ç‡Ÿæ”¶ - æˆæœ¬ã€‚é€™æ˜¯åˆ¤æ–·å€‹äººæˆ–å…¬å¸æœ‰æ²’æœ‰è³ºéŒ¢çš„æœ€åŸºæœ¬å…¬å¼ã€‚" },
                            { sub: "æ‡‰ç”¨", txt: "å°å€‹äººä¾†èªªï¼šè–ªæ°´(ç‡Ÿæ”¶) - ç”Ÿæ´»è²»(æˆæœ¬) = å„²è“„(æç›Š)ã€‚å¦‚æœä½ çš„æç›Šæ˜¯è² çš„ï¼Œä»£è¡¨ä½ åœ¨åƒè€æœ¬ã€‚" }
                        ]
                    },
                    { 
                        title: "ç·Šæ€¥å‚™ç”¨é‡‘", 
                        tag: "é¢¨éšªé˜²ç¦¦", 
                        details: [
                            { sub: "ç‚ºä»€éº¼éœ€è¦ï¼Ÿ", txt: "äººç”Ÿå……æ»¿æ„å¤–ï¼ˆè£å“¡ã€ç”Ÿç—…ã€ä¿®è»Šï¼‰ã€‚å‚™ç”¨é‡‘æ˜¯ä½ çš„é˜²è­·ç½©ï¼Œè®“ä½ åœ¨æ²’æ”¶å…¥æ™‚ä¸è‡³æ–¼è®Šè³£è³‡ç”¢ã€‚" },
                            { sub: "å­˜å¤šå°‘ï¼Ÿ", txt: "å»ºè­°å­˜ 3 ~ 6 å€‹æœˆçš„ã€Œå¿…è¦ç”Ÿæ´»è²»ã€ã€‚é€™ç­†éŒ¢è¦æ”¾åœ¨æµå‹•æ€§é«˜çš„åœ°æ–¹ï¼ˆå¦‚æ´»å­˜ï¼‰ï¼Œä¸èƒ½æ‹¿å»æŠ•è³‡ã€‚" }
                        ]
                    },
                    { 
                        title: "å¥½å‚µ vs å£å‚µ", 
                        tag: "å‚µå‹™ç®¡ç†", 
                        details: [
                            { sub: "å£å‚µ (Bad Debt)", txt: "ç‚ºäº†æ¶ˆè²»è€Œå€Ÿçš„éŒ¢ï¼Œä¸”ä¸æœƒå¸¶ä¾†æ”¶å…¥ã€‚ä¾‹å¦‚ï¼šä¿¡ç”¨å¡å¾ªç’°åˆ©æ¯(é«˜é”15%)ã€ä¿¡è²¸è²·å¥¢ä¾ˆå“ã€‚é€™æœƒè®“ä½ è¶Šä¾†è¶Šçª®ã€‚" },
                            { sub: "å¥½å‚µ (Good Debt)", txt: "ç‚ºäº†ã€Œè³ºæ›´å¤šéŒ¢ã€è€Œå€Ÿçš„éŒ¢ã€‚ä¾‹å¦‚ï¼šå­¸è²¸(æå‡è³ºéŒ¢èƒ½åŠ›)ã€æˆ¿è²¸(æŠ—é€šè†¨è³‡ç”¢)ã€ä¼æ¥­è²¸æ¬¾(æ“´å» )ã€‚åªè¦å ±é…¬ç‡ > åˆ©æ¯ï¼Œå°±æ˜¯å¥½å‚µã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 2,
                type: 'study',
                title: "ç¬¬äºŒé€±ï¼šé‡‘èå¸‚å ´èˆ‡å·¥å…·",
                desc: "èªè­˜è¶…å¸‚è£¡è³£ä»€éº¼èœï¼šè‚¡ç¥¨ã€å‚µåˆ¸èˆ‡åŸºé‡‘ã€‚",
                cards: [
                    { 
                        title: "è‚¡ç¥¨ (Stocks)", 
                        tag: "é«˜é¢¨éšªå·¥å…·", 
                        details: [
                            { sub: "åŸç†", txt: "æ“æœ‰ä¸€å®¶å…¬å¸çš„ä¸€å°éƒ¨åˆ†ã€‚ä½ æ˜¯è‚¡æ±ï¼Œå¯ä»¥åˆ†ç´…(è‚¡åˆ©)æˆ–è³ºåƒ¹å·®ã€‚" },
                            { sub: "é¢¨éšª", txt: "è‚¡åƒ¹å¯èƒ½æ­¸é›¶ã€‚é©åˆé•·æœŸæŒæœ‰ï¼Œé€éæ™‚é–“æ›å–é«˜å ±é…¬ã€‚" }
                        ]
                    },
                    { 
                        title: "å‚µåˆ¸ (Bonds)", 
                        tag: "ä½é¢¨éšªå·¥å…·", 
                        details: [
                            { sub: "åŸç†", txt: "å€ŸéŒ¢çµ¦æ”¿åºœæˆ–å…¬å¸ï¼Œå°æ–¹æ‰¿è«¾å®šæœŸä»˜åˆ©æ¯ï¼Œåˆ°æœŸé‚„æœ¬é‡‘ã€‚" },
                            { sub: "è³‡ç”¢é…ç½®", txt: "é€šå¸¸è‚¡ç¥¨è·Œçš„æ™‚å€™ï¼Œå‚µåˆ¸æœƒæ¼²ï¼ˆæˆ–è·Œæ¯”è¼ƒå°‘ï¼‰ï¼Œæ˜¯ä¿è­·è³‡ç”¢çš„é‡è¦å·¥å…·ã€‚" }
                        ]
                    },
                    { 
                        title: "ETF (æŒ‡æ•¸å‹åŸºé‡‘)", 
                        tag: "æ–°æ‰‹æ¨è–¦", 
                        details: [
                            { sub: "ä»€éº¼æ˜¯ ETF", txt: "åƒæ˜¯ä¸€å€‹ä¾¿ç•¶ï¼Œè£¡é¢æœ‰å„ç¨®èœ(è‚¡ç¥¨)ã€‚ä¾‹å¦‚ 0050 è²·é€²å°ç£æœ€å¤§çš„50å®¶å…¬å¸ã€‚" },
                            { sub: "å„ªé»", txt: "ä¸ç”¨é¸è‚¡ï¼Œè‡ªå‹•åˆ†æ•£é¢¨éšªã€‚é©åˆæ²’æ™‚é–“ç ”ç©¶è²¡å ±çš„æŠ•è³‡äººã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 3,
                type: 'study',
                title: "ç¬¬ä¸‰é€±ï¼šæ·±å…¥åŸºæœ¬é¢ (æ ¸å¿ƒ)",
                desc: "ã€é€²éšã€‘å¦‚ä½•åˆ¤æ–·ä¸€å®¶å…¬å¸çœŸæ­£çš„åƒ¹å€¼ï¼Ÿ",
                cards: [
                    {
                        title: "åŸºæœ¬é¢åˆ†æ (Fundamental)",
                        tag: "æ ¸å¿ƒè§€å¿µ",
                        details: [
                            { sub: "1. ä»€éº¼æ˜¯åŸºæœ¬é¢ï¼Ÿ", txt: "ç ”ç©¶å…¬å¸çš„ã€Œå¥åº·æª¢æŸ¥å ±å‘Šã€ã€‚ä¸çœ‹ç·šåœ–ï¼Œçœ‹è²¡å ±ã€ç”¢æ¥­åœ°ä½ã€è³ºéŒ¢èƒ½åŠ›ã€‚ç›¸ä¿¡è‚¡åƒ¹çµ‚ç©¶æœƒå›æ­¸çœŸå¯¦åƒ¹å€¼ã€‚" },
                            { sub: "2. æ·¨å€¼ (Net Worth)", txt: "<strong>å…¬å¼ï¼šè³‡ç”¢ - è² å‚µ = æ·¨å€¼ (è‚¡æ±æ¬Šç›Š)</strong>ã€‚<br>æƒ³åƒå…¬å¸ä»Šå¤©å€’é–‰ï¼ŒæŠŠå» æˆ¿è¨­å‚™å…¨è³£äº†é‚„å‚µï¼Œå‰©ä¸‹ä¾†åˆ†çµ¦è‚¡æ±çš„éŒ¢å°±æ˜¯æ·¨å€¼ã€‚å¦‚æœè‚¡åƒ¹ä½æ–¼æ¯è‚¡æ·¨å€¼ (P/B < 1)ï¼Œé€šå¸¸ä»£è¡¨è‚¡åƒ¹è¢«ä½ä¼°äº†ã€‚" },
                            { sub: "3. è² å‚µ (Liabilities) çš„è©³ç´°æ“ä½œ", txt: "<div class='highlight-box'>è² å‚µä¸ä¸€å®šæ˜¯å£äº‹ï¼é€™å«ã€Œæ§“æ¡¿ã€ã€‚</div><strong>æƒ…å¢ƒï¼š</strong>å¦‚æœå°ç©é›»å€ŸéŒ¢è“‹æ–°å» ï¼Œåˆ©æ¯æ˜¯ 2%ï¼Œä½†æ–°å» èƒ½å¸¶ä¾† 15% çš„ç²åˆ©ï¼Œé‚£é€™å€‹å€Ÿæ¬¾å°±æ˜¯ã€Œè°æ˜çš„æ“ä½œã€ã€‚<br><br><strong>å¦‚ä½•åˆ¤æ–·ï¼š</strong>è§€å¯Ÿã€Œæµå‹•æ¯”ç‡ã€(é‚„éŒ¢èƒ½åŠ›) èˆ‡ã€Œåˆ©æ¯ä¿éšœå€æ•¸ã€(è³ºçš„éŒ¢å¤ ä¸å¤ ä»˜åˆ©æ¯)ã€‚åªè¦ç¾é‡‘æµè½‰å¾—éä¾†ï¼Œé©åº¦è² å‚µèƒ½åŠ é€Ÿæˆé•·ã€‚" },
                            { sub: "4. ä¼°å€¼ (Valuation)", txt: "ç”¨ä¾†åˆ¤æ–·ç¾åœ¨è²·ã€Œè²´é‚„æ˜¯ä¾¿å®œã€ã€‚<br><strong>æœ¬ç›Šæ¯” (PE Ratio)ï¼š</strong>è‚¡åƒ¹ / EPSã€‚ç°¡å–®èªªå°±æ˜¯ã€Œä½ è¦èŠ±å¹¾å¹´æ‰èƒ½é ç²åˆ©å›æœ¬ã€ã€‚<br>æˆé•·è‚¡é€šå¸¸æœ¬ç›Šæ¯”é«˜(30å€+)ï¼Œå‚³ç”¢è‚¡é€šå¸¸ä½(10-15å€)ã€‚" }
                        ]
                    },
                    {
                        title: "è³‡ç”¢é…ç½® (Allocation)",
                        tag: "ç­–ç•¥",
                        details: [
                            { sub: "é›è›‹åˆ¥æ”¾åŒå€‹ç±ƒå­", txt: "å°‡è³‡é‡‘åˆ†é…åœ¨ç›¸é—œæ€§ä½çš„è³‡ç”¢(å¦‚ï¼šè‚¡ç¥¨+å‚µåˆ¸+ç¾é‡‘)ã€‚" },
                            { sub: "å†å¹³è¡¡ (Rebalance)", txt: "æ¯å¹´æª¢æŸ¥ä¸€æ¬¡ï¼ŒæŠŠæ¼²å¤ªå¤šçš„è³£æ‰ä¸€äº›ï¼Œæ‹¿å»è²·è·Œå¤šçš„ï¼Œå¼·è¿«ã€Œè²·ä½è³£é«˜ã€ã€‚" }
                        ]
                    }
                ]
            },
            {
                id: 4,
                type: 'game', // éŠæˆ²æ¨¡å¼
                title: "ç¬¬å››é€±ï¼šäººç”Ÿæ¨¡æ“¬å¯¦æˆ°",
                desc: "ä½ å·²ç¶“å­¸æœƒäº†åŸºç¤ã€‚ç¾åœ¨ï¼Œæˆ‘å€‘ä¾†æ¨¡æ“¬æœªä¾† 10 å¹´çš„äººç”Ÿè²¡å‹™æ±ºç­–ã€‚æ¯å€‹é¸æ“‡éƒ½æœ‰ä»£åƒ¹ã€‚",
                startScene: 'start'
            }
        ];

        // --- éŠæˆ²è…³æœ¬ (Game Script) ---
        const gameScenes = {
            'start': {
                icon: 'ğŸ“',
                text: 'ä½ å‰›å¤§å­¸ç•¢æ¥­ï¼Œèµ·è–ª 3.5 è¬ï¼Œæ‰‹ä¸Šæœ‰ 10 è¬ç©è“„ã€‚<br>ç¬¬ä¸€å€‹æœˆç™¼è–ªæ°´ï¼Œä½ æ‰“ç®—æ€éº¼åšï¼Ÿ',
                choices: [
                    { txt: 'çŠ’è³è‡ªå·±ï¼è²· iPhoneã€åƒå¤§é¤ (èŠ±æ‰ 3 è¬)', next: 'scene_2', money: -30000, msg: 'äº«å—ç•¶ä¸‹å¾ˆçˆ½ï¼Œä½†ç©è“„ç¬é–“å°‘äº† 30%ã€‚' },
                    { txt: 'åš´æ ¼åŸ·è¡Œ 631 æ³•å‰‡ (å­˜ä¸‹ 30%)', next: 'scene_2', money: 5000, msg: 'å¿ä½äº†æ…¾æœ›ã€‚é€™ç­†å„²è“„å°‡æˆç‚ºä½ çš„ç¬¬ä¸€æ¡¶é‡‘ã€‚' }
                ]
            },
            'scene_2': {
                icon: 'ğŸš—',
                text: '25 æ­²ï¼Œå·¥ä½œä¸‰å¹´äº†ã€‚åŒäº‹å€‘éƒ½è²·è»Šäº†ï¼Œä½ ä¹Ÿæƒ³è²·ä¸€å° 70 è¬çš„æ–°è»Šä»£æ­¥ã€‚',
                choices: [
                    { txt: 'è²·ï¼åˆ†æœŸä»˜æ¬¾ä¹Ÿè¦è²· (é ­æœŸæ¬¾ 20 è¬)', next: 'car_path', money: -200000, msg: 'ä½ è²·äº†æ–°è»Šï¼ä½†æ¯å€‹æœˆå¤šäº†è»Šè²¸ã€æ²¹éŒ¢ã€ä¿é¤Šè²»ï¼Œç¾é‡‘æµè®Šå¾—å¾ˆç·Šã€‚' },
                    { txt: 'å¿ä½ï¼Œé¨æ©Ÿè»Šå°±å¥½ï¼ŒéŒ¢æ‹¿å»æŠ•è³‡', next: 'invest_path', money: 0, msg: 'é›–ç„¶é€šå‹¤è¾›è‹¦ï¼Œä½†ä½ é¿é–‹äº†å·¨å¤§çš„è² å‚µï¼Œä¸¦ä¿ç•™äº†æŠ•è³‡æœ¬é‡‘ã€‚' }
                ]
            },
            // åˆ†æ”¯ Aï¼šè²·è»Šç·š
            'car_path': {
                icon: 'ğŸ“‰',
                text: 'è²·è»Šå¾Œä¸€å¹´ï¼Œå…¬å¸çªç„¶è£å“¡ï¼ä½ å¤±å»äº†æ”¶å…¥ï¼Œä½†è»Šè²¸æ¯å€‹æœˆé‚„æ˜¯è¦ç¹³ 1.5 è¬ã€‚',
                choices: [
                    { txt: 'æ…˜äº†ï¼Œæ²’æœ‰å‚™ç”¨é‡‘ï¼Œåªèƒ½ä¿¡è²¸', next: 'bad_end', money: -100000, msg: 'å‚µå‹™è¶Šæ»¾è¶Šå¤§ï¼Œé€™å°±æ˜¯ç‚ºä»€éº¼è¦æœ‰ç·Šæ€¥å‚™ç”¨é‡‘ï¼' },
                    { txt: 'å¿ç—›è³£è»Šæ±‚ç¾', next: 'scene_3', money: 400000, msg: 'æ–°è»Šè½åœ°æ‰“æŠ˜ï¼Œä½ è™§äº†å¹¾åè¬ï¼Œä½†è‡³å°‘è§£æ±ºäº†ç¾é‡‘æµå±æ©Ÿã€‚' }
                ]
            },
            // åˆ†æ”¯ Bï¼šæŠ•è³‡ç·š
            'invest_path': {
                icon: 'ğŸ“ˆ',
                text: 'ä½ æŠŠæ²’è²·è»Šçš„éŒ¢æŠ•å…¥è‚¡å¸‚ã€‚é€™æ™‚é‡åˆ°é‡‘èæµ·å˜¯ï¼Œå¸³é¢è™§æ 30%ï¼',
                choices: [
                    { txt: 'åš‡æ­»äº†ï¼Œå…¨éƒ¨è³£æ‰æ­¢æ', next: 'scene_3', money: -100000, msg: 'ä½ åœ¨æœ€ä½é»è³£å‡ºï¼Œå¯¦ç¾äº†è™§æã€‚é€™å«ã€ŒéŸ­èœã€ã€‚' },
                    { txt: 'ç›¸ä¿¡åŸºæœ¬é¢ï¼Œç¹¼çºŒå®šæœŸå®šé¡', next: 'rich_path', money: 0, msg: 'ä½ å¿ä½äº†ææ…Œã€‚å…©å¹´å¾Œå¸‚å ´åå½ˆï¼Œä½ çš„è³‡ç”¢ç¿»å€ã€‚' }
                ]
            },
            'rich_path': {
                icon: 'ğŸ’°',
                text: '35 æ­²ã€‚å› ç‚ºç•¶åˆæ²’è²·è»Š + å …æŒæŠ•è³‡ï¼Œä½ çš„è³‡ç”¢çªç ´ 500 è¬ã€‚ä½ å¯ä»¥é¸æ“‡ï¼š',
                choices: [
                    { txt: 'ä»˜é ­æœŸæ¬¾è²·æˆ¿ï¼Œæˆå®¶ç«‹æ¥­', next: 'happy_end', money: -3000000, msg: 'æ­å–œï¼ä½ æœ‰äº†è‡ªå·±çš„å®¶ï¼Œä¸”è²¡å‹™ç‹€æ³ä¾ç„¶å¥åº·ã€‚' },
                    { txt: 'è¾­è·å‰µæ¥­ï¼Œè¿½é€å¤¢æƒ³', next: 'happy_end', money: -1000000, msg: 'å› ç‚ºæœ‰è¢«å‹•æ”¶å…¥æ”¯æ’ï¼Œä½ çµ‚æ–¼å¯ä»¥åšè‡ªå·±æƒ³åšçš„äº‹ï¼' }
                ]
            },
            'scene_3': {
                icon: 'ğŸ˜',
                text: 'ç¶“éæ³¢æŠ˜ï¼Œä½ åˆ°äº† 35 æ­²ã€‚é›–ç„¶æ²’ç ´ç”¢ï¼Œä½†è³‡ç”¢ç´¯ç©ä¸å¤šã€‚',
                choices: [
                    { txt: 'é‡æ–°æª¢è¦–è²¡å‹™ï¼Œå¾é ­é–‹å§‹', next: 'start', money: 0, msg: 'äººç”Ÿéš¨æ™‚å¯ä»¥é‡æ–°é–‹å§‹ï¼Œé€™æ¬¡è¨˜å¾—è¦åšå¥½è³‡ç”¢é…ç½®ã€‚' }
                ]
            },
            'bad_end': {
                icon: 'ğŸ’¸',
                text: 'ç ´ç”¢çµå±€ã€‚ä½ çš„ç¾é‡‘æµæ–·è£‚ï¼Œè¢«è¿«è² å‚µåº¦æ—¥ã€‚',
                choices: [
                    { txt: 'é‡æ–°æŒ‘æˆ° (è¨˜å–æ•™è¨“)', next: 'start', money: 0, msg: 'é€™æ¬¡è©¦è‘—ä¸è¦è²·è»Šï¼Œä¸¦ä¿ç•™å‚™ç”¨é‡‘è©¦è©¦çœ‹ï¼Ÿ' }
                ]
            },
            'happy_end': {
                icon: 'ğŸ†',
                text: 'è²¡å¯Œè‡ªç”±çµå±€ï¼ä½ åšå‡ºäº†æ­£ç¢ºçš„é¸æ“‡ï¼Œè®“è¤‡åˆ©ç‚ºä½ å·¥ä½œã€‚',
                choices: [
                    { txt: 'å†ç©ä¸€æ¬¡', next: 'start', money: 0, msg: 'è©¦è©¦çœ‹åˆ¥çš„é¸é …å§ï¼' }
                ]
            }
        };

        // --- å…¨åŸŸè®Šæ•¸ ---
        let currentModuleId = 1;
        let gameState = { money: 100000, scene: 'start' };

        // --- åˆå§‹åŒ–èˆ‡æ¸²æŸ“ ---
        function init() {
            renderSidebar();
            loadModule(1);
        }

        function renderSidebar() {
            const list = document.getElementById('moduleList');
            list.innerHTML = '';
            curriculum.forEach(mod => {
                const li = document.createElement('li');
                li.className = `module-item ${mod.id === currentModuleId ? 'active' : ''}`;
                li.innerHTML = `<span>${mod.title}</span>`;
                li.onclick = () => loadModule(mod.id);
                list.appendChild(li);
            });
        }

        function loadModule(id) {
            currentModuleId = id;
            renderSidebar();
            const module = curriculum.find(m => m.id === id);
            const contentDiv = document.getElementById('contentArea');

            // æ¸²æŸ“æ¨™é¡Œå€
            let html = `
                <div class="header-section">
                    <h2>${module.title}</h2>
                    <p>${module.desc}</p>
                </div>
            `;

            // åˆ¤æ–·æ¨¡å¼
            if (module.type === 'study') {
                // å­¸ç¿’æ¨¡å¼ï¼šæ¸²æŸ“å¡ç‰‡
                html += `<div class="card-grid">`;
                module.cards.forEach((card, index) => {
                    html += `
                        <div class="flashcard" onclick="openDetail(${id}, ${index})">
                            <span class="tag">${card.tag}</span>
                            <h3 style="font-size:1.4rem; color:#334155;">${card.title}</h3>
                            <div class="click-hint">ğŸ‘† é»æ“Šçœ‹è©³è§£</div>
                        </div>
                    `;
                });
                html += `</div>`;
            } else {
                // éŠæˆ²æ¨¡å¼ï¼šæ¸²æŸ“éŠæˆ²å®¹å™¨
                html += `
                    <div class="game-panel" id="gamePanel">
                        </div>
                `;
                // ç¨å¾®å»¶é²åŸ·è¡ŒéŠæˆ²æ¸²æŸ“ï¼Œç¢ºä¿ DOM å·²å»ºç«‹
                setTimeout(() => {
                    gameState = { money: 100000, scene: module.startScene };
                    renderGameScene(module.startScene);
                }, 0);
            }

            contentDiv.innerHTML = html;
        }

        // --- å­¸ç¿’æ¨¡å¼é‚è¼¯ (Modal) ---
        function openDetail(moduleId, cardIndex) {
            const module = curriculum.find(m => m.id === moduleId);
            const card = module.cards[cardIndex];
            
            document.getElementById('modalTitle').innerText = card.title;
            const body = document.getElementById('modalBody');
            body.innerHTML = '';

            card.details.forEach(detail => {
                body.innerHTML += `
                    <div class="detail-block">
                        <div class="detail-title">ğŸ”¹ ${detail.sub}</div>
                        <div>${detail.txt}</div>
                    </div>
                `;
            });

            document.getElementById('detailModal').style.display = 'flex';
        }

        function closeModal(e) {
            document.getElementById('detailModal').style.display = 'none';
        }

        // --- éŠæˆ²æ¨¡å¼é‚è¼¯ ---
        function renderGameScene(sceneId) {
            const scene = gameScenes[sceneId];
            const panel = document.getElementById('gamePanel');
            
            if (!panel) return;

            let html = `
                <div class="status-bar">
                    <div>è³‡ç”¢ï¼š<span class="status-val money">$${gameState.money.toLocaleString()}</span></div>
                </div>
                <div class="scene-content">
                    <div class="scene-icon">${scene.icon}</div>
                    <div class="scene-text">${scene.text}</div>
                    <div style="width:100%">
            `;

            scene.choices.forEach(choice => {
                html += `<button class="choice-btn" onclick="makeChoice('${choice.next}', ${choice.money}, '${choice.msg}')">${choice.txt}</button>`;
            });

            html += `</div></div>`;
            panel.innerHTML = html;
        }

        function makeChoice(nextScene, moneyChange, msg) {
            gameState.money += moneyChange;
            alert(msg); // ç°¡å–®çš„å›é¥‹æç¤º
            renderGameScene(nextScene);
        }

        // å•Ÿå‹•
        init();

    </script>
</body>
</html>